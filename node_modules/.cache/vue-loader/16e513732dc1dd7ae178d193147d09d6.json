{"remainingRequest":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/src/pages/Category.vue?vue&type=style&index=0&id=c352b2bc&lang=less&scoped=true&","dependencies":[{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/src/pages/Category.vue","mtime":1551778974785},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/css-loader/index.js","mtime":1551481012635},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1551481015436},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/postcss-loader/src/index.js","mtime":1551481014416},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/less-loader/dist/cjs.js","mtime":1551481013611},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/style-resources-loader/lib/index.js","mtime":1551481015149},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/cache-loader/dist/cjs.js","mtime":1551481012010},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/vue-loader/lib/index.js","mtime":1551481015436}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.category {\n  width: 1200px;\n  margin: 0 auto;\n  margin-top: 15px;\n  .categoryLeft {\n    width: 240px;\n    float: left;\n    border-top: 4px solid #cab389;\n    .leftNav {\n      li {\n        border-bottom: 1px solid @borderC3;\n        box-sizing: border-box;\n        list-style: none;\n        color: @fontColor2;\n        span {\n          box-sizing: border-box;\n          display: inline-block;\n          font-size: 14px;\n          height: 60px;\n          line-height: 60px;\n          padding: 0 30px;\n        }\n      }\n      .isbut {\n        color: @fontColor4;\n        background-color: @backgroundColor5;\n        span {\n          border-bottom: 4px solid @fontColor4;\n        }\n      }\n    }\n  }\n  .categoryRight {\n    width: 880px;\n    float: right;\n    .rightCategoryTitle p {\n      width: 100%;\n      height: 60px;\n      line-height: 60px;\n      font-size: 22px;\n      font-weight: 700;\n      color: #cab389;\n    }\n\n    .majorSort {\n      width: 100%;\n      height: 30px;\n      margin-bottom: 10px;\n      font-weight: 400;\n      .majorbut {\n        background-color: @backgroundColor3;\n        color: @fontColor5;\n        border-radius: 2px;\n      }\n      li {\n        float: left;\n        list-style: none;\n        padding: 0 10px;\n        line-height: 30px;\n        font-size: 14px;\n        color: #666;\n        cursor: pointer;\n      }\n      li:hover{\n        color:@fontColor3;\n      }\n    }\n    .minorSort {\n      width: 100%;\n      height: 30px;\n      padding: 15px;\n      background-color: @backgroundColor7;\n      .majorbut {\n        background-color: @backgroundColor3;\n        color: @fontColor5;\n        border-radius: 2px;\n      }\n      li,\n      span {\n        float: left;\n        list-style: none;\n        padding: 0 10px;\n        line-height: 30px;\n        font-size: 14px;\n        color: #666;\n        cursor: pointer;\n      }\n      li:hover{\n        color:@fontColor3;\n      }\n      span {\n        padding: 0;\n      }\n    }\n  }\n}\n.book {\n  box-sizing: border-box;\n  width: 410px;\n  display: inline-block;\n  padding: 15px;\n  .bookImg {\n    float: left;\n    height: 120px;\n    width: 90px;\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .bookinfo {\n    height: 120px;\n    margin-left: 15px;\n    float: left;\n    width: 275px;\n    .bookname {\n      color: #333;\n      font-weight: 700;\n      font-size: 14px;\n      line-height: 22px;\n    }\n    .author,\n    .brief,\n    .popular {\n      font-size: 12px;\n      color: #999;\n    }\n    .author {\n      line-height: 28px;\n    }\n    .brief {\n      height: 40px;\n      line-height: 20px;\n      margin: 5px 0;\n      box-orient: vertical;\n      line-clamp: 2;\n      overflow: hidden;\n    }\n    .popular {\n      line-height: 20px;\n      span {\n        color: @fontColor3;\n      }\n      .shu {\n        padding: 0 15px;\n      }\n    }\n  }\n}\n",{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"category\">\n    <div class=\"categoryLeft\">\n      <div class=\"leftNav\">\n        <ul>\n          <li\n            v-for=\"(item,index) in subCategories\"\n            :key=\"index\"\n            @click=\"gender = index,major = item[0].major,changeGender()\"\n            :class=\"[gender == index ? 'isbut':'']\"\n          >\n            <span v-if=\"index == 'male'\">男生</span>\n            <span v-else-if=\"index == 'female'\">女生</span>\n            <span v-else-if=\"index == 'press'\">出版物</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"categoryRight\">\n      <div class=\"rightCategoryTitle\">\n        <p v-if=\"this.gender == 'female'\">女生</p>\n        <p v-else-if=\"this.gender == 'press'\">出版物</p>\n        <p v-else>男生</p>\n      </div>\n      <div class=\"majorSort\">\n        <ul>\n          <li\n            v-for=\"(list,index) in subCategories[gender]\"\n            :key=\"index\"\n            @click=\"major = list.major,changeMajor()\"\n            :class=\"[major == list.major ? 'majorbut' : '']\"\n          >{{list.major}}</li>\n        </ul>\n      </div>\n      <div class=\"minorSort\" v-if=\"minorlist != ''\">\n        <span>具体类型：</span>\n        <ul>\n          <li\n            v-for=\"(item,index) in minorlist\"\n            :key=\"index\"\n            @click=\"minor = item,changeMinor()\"\n            :class=\"[minor == item ? 'majorbut' : '']\"\n          >{{item}}</li>\n        </ul>\n      </div>\n\n      <div class=\"bookList\">\n        <div class=\"book\" v-for=\"list in categorylist.books\" :key=\"list._id\">\n          <router-link :to=\"{path:'/book',query:{id:list._id}}\">\n            <div class=\"bookImg\">\n              <img :src=\"`http://statics.zhuishushenqi.com${list.cover}`\" v-if=\"list.cover\">\n              <img src=\"../assets/img-bk.png\" v-else>\n            </div>\n            <div class=\"bookinfo\">\n              <p class=\"bookname\">{{list.title}}</p>\n              <p class=\"author\">{{list.author}}</p>\n              <p class=\"brief\">{{list.shortIntro}}</p>\n              <p class=\"popular\">\n                <span>{{list.latelyFollower}}</span>人气\n                <span class=\"shu\">|</span>\n                <span>{{list.retentionRatio}}%</span>读者存留\n              </p>\n            </div>\n          </router-link>\n        </div>\n        <el-pagination\n          background\n          :current-page.sync=\"currentPage\"\n          :page-size=\"28\"\n          layout=\"total, prev, pager, next,jumper\"\n          :total=\"categorylist.total\"\n        ></el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      currentPage: 1,\n      gender: \"\",\n      majorlist: \"\",\n      major: \"\",\n      minorlist: \"\",\n      minor: \"\",\n      category: \"\",\n      subCategories: \"\",\n      categorylist: \"\"\n    };\n  },\n  methods: {\n    //改变url参数\n    changeGender: function() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender\n        }\n      });\n    },\n    //改变url参数\n    changeMajor: function() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender,\n          major: this.major\n        }\n      });\n    },\n    changeMinor: function() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender,\n          major: this.major,\n          minor: this.minor\n        }\n      });\n    },\n    //改变ajax请求参数\n    getcanshu: function() {\n      if (this.$route.query.gender) {\n        this.gender = this.$route.query.gender;\n        this.majorlist = this.subCategories[this.gender];\n      } else {\n        this.gender = \"male\";\n        this.majorlist = this.subCategories[\"male\"];\n      }\n\n      if (this.$route.query.major) {\n        this.major = this.$route.query.major;\n      } else {\n        this.major = this.subCategories[this.gender][0].major;\n      }\n\n      for (const key in this.majorlist) {\n        if (this.majorlist[key].major == this.major) {\n          this.minorlist = this.majorlist[key].mins;\n        }\n      }\n\n      if (this.$route.query.minor) {\n        this.minor = this.$route.query.minor;\n      } else {\n        this.minor = \"\";\n      }\n    }\n  },\n  watch: {\n    $route() {\n      this.getcanshu();\n      //参数改变后的操作\n      this.$axios\n        .get(\n          `https://novel.juhe.im/category-info?type=hot&limit=19&gender=${\n            this.gender\n          }&major=${this.major}&minor=${this.minor}&start=${this.currentPage}`\n        )\n        .then(response => {\n          this.categorylist = response.data;\n        });\n    },\n    currentPage() {\n      console.log(111);\n      this.getcanshu();\n      //参数改变后的操作\n      this.$axios\n        .get(\n          `https://novel.juhe.im/category-info?type=hot&limit=19&gender=${\n            this.gender\n          }&major=${this.major}&minor=${this.minor}&start=${this.currentPage}`\n        )\n        .then(response => {\n          this.categorylist = response.data;\n        });\n    }\n  },\n  mounted() {\n    this.$axios.get(`https://novel.juhe.im/sub-categories`).then(sub => {\n      delete sub.data.picture;\n      delete sub.data.ok;\n      this.subCategories = sub.data;\n      this.getcanshu();\n      this.$axios\n        .get(\n          `https://novel.juhe.im/category-info?type=hot&limit=19&gender=${\n            this.gender\n          }&major=${this.major}&minor=${this.minor}&start=${this.currentPage}`\n        )\n        .then(response => {\n          this.categorylist = response.data;\n        });\n    });\n  }\n};\n</script>\n<style lang='less' scoped>\n.category {\n  width: 1200px;\n  margin: 0 auto;\n  margin-top: 15px;\n  .categoryLeft {\n    width: 240px;\n    float: left;\n    border-top: 4px solid #cab389;\n    .leftNav {\n      li {\n        border-bottom: 1px solid @borderC3;\n        box-sizing: border-box;\n        list-style: none;\n        color: @fontColor2;\n        span {\n          box-sizing: border-box;\n          display: inline-block;\n          font-size: 14px;\n          height: 60px;\n          line-height: 60px;\n          padding: 0 30px;\n        }\n      }\n      .isbut {\n        color: @fontColor4;\n        background-color: @backgroundColor5;\n        span {\n          border-bottom: 4px solid @fontColor4;\n        }\n      }\n    }\n  }\n  .categoryRight {\n    width: 880px;\n    float: right;\n    .rightCategoryTitle p {\n      width: 100%;\n      height: 60px;\n      line-height: 60px;\n      font-size: 22px;\n      font-weight: 700;\n      color: #cab389;\n    }\n\n    .majorSort {\n      width: 100%;\n      height: 30px;\n      margin-bottom: 10px;\n      font-weight: 400;\n      .majorbut {\n        background-color: @backgroundColor3;\n        color: @fontColor5;\n        border-radius: 2px;\n      }\n      li {\n        float: left;\n        list-style: none;\n        padding: 0 10px;\n        line-height: 30px;\n        font-size: 14px;\n        color: #666;\n        cursor: pointer;\n      }\n      li:hover{\n        color:@fontColor3;\n      }\n    }\n    .minorSort {\n      width: 100%;\n      height: 30px;\n      padding: 15px;\n      background-color: @backgroundColor7;\n      .majorbut {\n        background-color: @backgroundColor3;\n        color: @fontColor5;\n        border-radius: 2px;\n      }\n      li,\n      span {\n        float: left;\n        list-style: none;\n        padding: 0 10px;\n        line-height: 30px;\n        font-size: 14px;\n        color: #666;\n        cursor: pointer;\n      }\n      li:hover{\n        color:@fontColor3;\n      }\n      span {\n        padding: 0;\n      }\n    }\n  }\n}\n.book {\n  box-sizing: border-box;\n  width: 410px;\n  display: inline-block;\n  padding: 15px;\n  .bookImg {\n    float: left;\n    height: 120px;\n    width: 90px;\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .bookinfo {\n    height: 120px;\n    margin-left: 15px;\n    float: left;\n    width: 275px;\n    .bookname {\n      color: #333;\n      font-weight: 700;\n      font-size: 14px;\n      line-height: 22px;\n    }\n    .author,\n    .brief,\n    .popular {\n      font-size: 12px;\n      color: #999;\n    }\n    .author {\n      line-height: 28px;\n    }\n    .brief {\n      height: 40px;\n      line-height: 20px;\n      margin: 5px 0;\n      box-orient: vertical;\n      line-clamp: 2;\n      overflow: hidden;\n    }\n    .popular {\n      line-height: 20px;\n      span {\n        color: @fontColor3;\n      }\n      .shu {\n        padding: 0 15px;\n      }\n    }\n  }\n}\n</style>"]}]}