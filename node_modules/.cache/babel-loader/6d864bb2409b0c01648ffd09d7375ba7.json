{"remainingRequest":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/babel-loader/lib/index.js!/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/src/pages/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/src/pages/Category.vue","mtime":1551778974785},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/cache-loader/dist/cjs.js","mtime":1551481012010},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/babel-loader/lib/index.js","mtime":1551481011834},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/cache-loader/dist/cjs.js","mtime":1551481012010},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/vue-loader/lib/index.js","mtime":1551481015436},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/cache-loader/dist/cjs.js","mtime":1551481012010},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/babel-loader/lib/index.js","mtime":1551481011834},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/cache-loader/dist/cjs.js","mtime":1551481012010},{"path":"/Users/renyl/Documents/GitHub/zhuishushenqi-Demo/node_modules/vue-loader/lib/index.js","mtime":1551481015436}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      currentPage: 1,\n      gender: \"\",\n      majorlist: \"\",\n      major: \"\",\n      minorlist: \"\",\n      minor: \"\",\n      category: \"\",\n      subCategories: \"\",\n      categorylist: \"\"\n    };\n  },\n  methods: {\n    //改变url参数\n    changeGender: function changeGender() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender\n        }\n      });\n    },\n    //改变url参数\n    changeMajor: function changeMajor() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender,\n          major: this.major\n        }\n      });\n    },\n    changeMinor: function changeMinor() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender,\n          major: this.major,\n          minor: this.minor\n        }\n      });\n    },\n    //改变ajax请求参数\n    getcanshu: function getcanshu() {\n      if (this.$route.query.gender) {\n        this.gender = this.$route.query.gender;\n        this.majorlist = this.subCategories[this.gender];\n      } else {\n        this.gender = \"male\";\n        this.majorlist = this.subCategories[\"male\"];\n      }\n\n      if (this.$route.query.major) {\n        this.major = this.$route.query.major;\n      } else {\n        this.major = this.subCategories[this.gender][0].major;\n      }\n\n      for (var key in this.majorlist) {\n        if (this.majorlist[key].major == this.major) {\n          this.minorlist = this.majorlist[key].mins;\n        }\n      }\n\n      if (this.$route.query.minor) {\n        this.minor = this.$route.query.minor;\n      } else {\n        this.minor = \"\";\n      }\n    }\n  },\n  watch: {\n    $route: function $route() {\n      var _this = this;\n\n      this.getcanshu(); //参数改变后的操作\n\n      this.$axios.get(\"https://novel.juhe.im/category-info?type=hot&limit=19&gender=\".concat(this.gender, \"&major=\").concat(this.major, \"&minor=\").concat(this.minor, \"&start=\").concat(this.currentPage)).then(function (response) {\n        _this.categorylist = response.data;\n      });\n    },\n    currentPage: function currentPage() {\n      var _this2 = this;\n\n      console.log(111);\n      this.getcanshu(); //参数改变后的操作\n\n      this.$axios.get(\"https://novel.juhe.im/category-info?type=hot&limit=19&gender=\".concat(this.gender, \"&major=\").concat(this.major, \"&minor=\").concat(this.minor, \"&start=\").concat(this.currentPage)).then(function (response) {\n        _this2.categorylist = response.data;\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.$axios.get(\"https://novel.juhe.im/sub-categories\").then(function (sub) {\n      delete sub.data.picture;\n      delete sub.data.ok;\n      _this3.subCategories = sub.data;\n\n      _this3.getcanshu();\n\n      _this3.$axios.get(\"https://novel.juhe.im/category-info?type=hot&limit=19&gender=\".concat(_this3.gender, \"&major=\").concat(_this3.major, \"&minor=\").concat(_this3.minor, \"&start=\").concat(_this3.currentPage)).then(function (response) {\n        _this3.categorylist = response.data;\n      });\n    });\n  }\n};",{"version":3,"sources":["Category.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"category\">\n    <div class=\"categoryLeft\">\n      <div class=\"leftNav\">\n        <ul>\n          <li\n            v-for=\"(item,index) in subCategories\"\n            :key=\"index\"\n            @click=\"gender = index,major = item[0].major,changeGender()\"\n            :class=\"[gender == index ? 'isbut':'']\"\n          >\n            <span v-if=\"index == 'male'\">男生</span>\n            <span v-else-if=\"index == 'female'\">女生</span>\n            <span v-else-if=\"index == 'press'\">出版物</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"categoryRight\">\n      <div class=\"rightCategoryTitle\">\n        <p v-if=\"this.gender == 'female'\">女生</p>\n        <p v-else-if=\"this.gender == 'press'\">出版物</p>\n        <p v-else>男生</p>\n      </div>\n      <div class=\"majorSort\">\n        <ul>\n          <li\n            v-for=\"(list,index) in subCategories[gender]\"\n            :key=\"index\"\n            @click=\"major = list.major,changeMajor()\"\n            :class=\"[major == list.major ? 'majorbut' : '']\"\n          >{{list.major}}</li>\n        </ul>\n      </div>\n      <div class=\"minorSort\" v-if=\"minorlist != ''\">\n        <span>具体类型：</span>\n        <ul>\n          <li\n            v-for=\"(item,index) in minorlist\"\n            :key=\"index\"\n            @click=\"minor = item,changeMinor()\"\n            :class=\"[minor == item ? 'majorbut' : '']\"\n          >{{item}}</li>\n        </ul>\n      </div>\n\n      <div class=\"bookList\">\n        <div class=\"book\" v-for=\"list in categorylist.books\" :key=\"list._id\">\n          <router-link :to=\"{path:'/book',query:{id:list._id}}\">\n            <div class=\"bookImg\">\n              <img :src=\"`http://statics.zhuishushenqi.com${list.cover}`\" v-if=\"list.cover\">\n              <img src=\"../assets/img-bk.png\" v-else>\n            </div>\n            <div class=\"bookinfo\">\n              <p class=\"bookname\">{{list.title}}</p>\n              <p class=\"author\">{{list.author}}</p>\n              <p class=\"brief\">{{list.shortIntro}}</p>\n              <p class=\"popular\">\n                <span>{{list.latelyFollower}}</span>人气\n                <span class=\"shu\">|</span>\n                <span>{{list.retentionRatio}}%</span>读者存留\n              </p>\n            </div>\n          </router-link>\n        </div>\n        <el-pagination\n          background\n          :current-page.sync=\"currentPage\"\n          :page-size=\"28\"\n          layout=\"total, prev, pager, next,jumper\"\n          :total=\"categorylist.total\"\n        ></el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      currentPage: 1,\n      gender: \"\",\n      majorlist: \"\",\n      major: \"\",\n      minorlist: \"\",\n      minor: \"\",\n      category: \"\",\n      subCategories: \"\",\n      categorylist: \"\"\n    };\n  },\n  methods: {\n    //改变url参数\n    changeGender: function() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender\n        }\n      });\n    },\n    //改变url参数\n    changeMajor: function() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender,\n          major: this.major\n        }\n      });\n    },\n    changeMinor: function() {\n      this.$router.push({\n        path: \"/category\",\n        query: {\n          gender: this.gender,\n          major: this.major,\n          minor: this.minor\n        }\n      });\n    },\n    //改变ajax请求参数\n    getcanshu: function() {\n      if (this.$route.query.gender) {\n        this.gender = this.$route.query.gender;\n        this.majorlist = this.subCategories[this.gender];\n      } else {\n        this.gender = \"male\";\n        this.majorlist = this.subCategories[\"male\"];\n      }\n\n      if (this.$route.query.major) {\n        this.major = this.$route.query.major;\n      } else {\n        this.major = this.subCategories[this.gender][0].major;\n      }\n\n      for (const key in this.majorlist) {\n        if (this.majorlist[key].major == this.major) {\n          this.minorlist = this.majorlist[key].mins;\n        }\n      }\n\n      if (this.$route.query.minor) {\n        this.minor = this.$route.query.minor;\n      } else {\n        this.minor = \"\";\n      }\n    }\n  },\n  watch: {\n    $route() {\n      this.getcanshu();\n      //参数改变后的操作\n      this.$axios\n        .get(\n          `https://novel.juhe.im/category-info?type=hot&limit=19&gender=${\n            this.gender\n          }&major=${this.major}&minor=${this.minor}&start=${this.currentPage}`\n        )\n        .then(response => {\n          this.categorylist = response.data;\n        });\n    },\n    currentPage() {\n      console.log(111);\n      this.getcanshu();\n      //参数改变后的操作\n      this.$axios\n        .get(\n          `https://novel.juhe.im/category-info?type=hot&limit=19&gender=${\n            this.gender\n          }&major=${this.major}&minor=${this.minor}&start=${this.currentPage}`\n        )\n        .then(response => {\n          this.categorylist = response.data;\n        });\n    }\n  },\n  mounted() {\n    this.$axios.get(`https://novel.juhe.im/sub-categories`).then(sub => {\n      delete sub.data.picture;\n      delete sub.data.ok;\n      this.subCategories = sub.data;\n      this.getcanshu();\n      this.$axios\n        .get(\n          `https://novel.juhe.im/category-info?type=hot&limit=19&gender=${\n            this.gender\n          }&major=${this.major}&minor=${this.minor}&start=${this.currentPage}`\n        )\n        .then(response => {\n          this.categorylist = response.data;\n        });\n    });\n  }\n};\n</script>\n<style lang='less' scoped>\n.category {\n  width: 1200px;\n  margin: 0 auto;\n  margin-top: 15px;\n  .categoryLeft {\n    width: 240px;\n    float: left;\n    border-top: 4px solid #cab389;\n    .leftNav {\n      li {\n        border-bottom: 1px solid @borderC3;\n        box-sizing: border-box;\n        list-style: none;\n        color: @fontColor2;\n        span {\n          box-sizing: border-box;\n          display: inline-block;\n          font-size: 14px;\n          height: 60px;\n          line-height: 60px;\n          padding: 0 30px;\n        }\n      }\n      .isbut {\n        color: @fontColor4;\n        background-color: @backgroundColor5;\n        span {\n          border-bottom: 4px solid @fontColor4;\n        }\n      }\n    }\n  }\n  .categoryRight {\n    width: 880px;\n    float: right;\n    .rightCategoryTitle p {\n      width: 100%;\n      height: 60px;\n      line-height: 60px;\n      font-size: 22px;\n      font-weight: 700;\n      color: #cab389;\n    }\n\n    .majorSort {\n      width: 100%;\n      height: 30px;\n      margin-bottom: 10px;\n      font-weight: 400;\n      .majorbut {\n        background-color: @backgroundColor3;\n        color: @fontColor5;\n        border-radius: 2px;\n      }\n      li {\n        float: left;\n        list-style: none;\n        padding: 0 10px;\n        line-height: 30px;\n        font-size: 14px;\n        color: #666;\n        cursor: pointer;\n      }\n      li:hover{\n        color:@fontColor3;\n      }\n    }\n    .minorSort {\n      width: 100%;\n      height: 30px;\n      padding: 15px;\n      background-color: @backgroundColor7;\n      .majorbut {\n        background-color: @backgroundColor3;\n        color: @fontColor5;\n        border-radius: 2px;\n      }\n      li,\n      span {\n        float: left;\n        list-style: none;\n        padding: 0 10px;\n        line-height: 30px;\n        font-size: 14px;\n        color: #666;\n        cursor: pointer;\n      }\n      li:hover{\n        color:@fontColor3;\n      }\n      span {\n        padding: 0;\n      }\n    }\n  }\n}\n.book {\n  box-sizing: border-box;\n  width: 410px;\n  display: inline-block;\n  padding: 15px;\n  .bookImg {\n    float: left;\n    height: 120px;\n    width: 90px;\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .bookinfo {\n    height: 120px;\n    margin-left: 15px;\n    float: left;\n    width: 275px;\n    .bookname {\n      color: #333;\n      font-weight: 700;\n      font-size: 14px;\n      line-height: 22px;\n    }\n    .author,\n    .brief,\n    .popular {\n      font-size: 12px;\n      color: #999;\n    }\n    .author {\n      line-height: 28px;\n    }\n    .brief {\n      height: 40px;\n      line-height: 20px;\n      margin: 5px 0;\n      box-orient: vertical;\n      line-clamp: 2;\n      overflow: hidden;\n    }\n    .popular {\n      line-height: 20px;\n      span {\n        color: @fontColor3;\n      }\n      .shu {\n        padding: 0 15px;\n      }\n    }\n  }\n}\n</style>"],"sourceRoot":"src/pages"}]}